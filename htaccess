# This file isn't required for TreeTrumpet, but if your server supports it, this file will: 
# * Enable caching
# * Give you prettier URLs (/individual/id/name instead of individual.php/id/name)
# * Bump up PHP's max memory (TODO)
# * Increase security by denying access to sub-directories (TODO)

# Add some caching
AddType image/x-icon .ico
<IfModule mod_expires.c>
ExpiresActive on
ExpiresByType image/x-icon "access plus 1 year"
<FilesMatch "\.(ico|jpg|jpeg|png|gif|js|css|swf)$">
ExpiresDefault "access plus 2 months"
</FilesMatch>
</IfModule>

FileETag none
<ifModule mod_headers.c>
Header unset ETag
</ifModule>


# Do some pretty URLs!
<IfModule mod_rewrite.c>
# Disable multiviews so that /tree doesn't try to map to /tree.html or something silly like that
    Options -MultiViews
    RewriteEngine On

# All PHP and gedcom requests should go through index.php
    RewriteCond %{REQUEST_FILENAME} .*(php|ged)
    RewriteCond %{REQUEST_FILENAME} !.*index.php.*
    RewriteRule (.*(php|ged))(.*) index.php$3?controller=$1 [L]

# Any files which don't exist should go through index.php
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !.*index.php
    RewriteRule . index.php?ruri=%{REQUEST_URI} [L]

# Robots.txt because it never really exists
    RewriteCond %{REQUEST_FILENAME} robots.txt
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule . index.php$3?controller=robots [L]
</IfModule>
